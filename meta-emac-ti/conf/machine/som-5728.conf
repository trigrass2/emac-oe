#@TYPE: Machine
#@NAME: c03439-00
#@DESCRIPTION: Machine configuration for 5228.

include conf/machine/include/tune-cortexa9.inc
include  conf/machine/include/soc-family.inc

PREFERRED_PROVIDER_virtual/libgl     = "ti-sgx-ddk-um"
PREFERRED_PROVIDER_virtual/egl       = "ti-sgx-ddk-um"
PREFERRED_PROVIDER_virtual/libgles1  = "ti-sgx-ddk-um"
PREFERRED_PROVIDER_virtual/libgles2  = "ti-sgx-ddk-um"
PREFERRED_PROVIDER_virtual/libgbm    = "ti-sgx-ddk-um"

MACHINE_FEATURES = " \
    arm \
    pci \
    apm \
    usbgadget \
    usbhost \
    vfat \ 
    ext3 \
    screen \
    alsa \
    ethernet \
    gpu \
    mmip \
    dsp \
    gc320 \
"

## DRA7XX OMAP-A15 RTOS packages
## recipes-bsp/board-rtos/board-rtos_git.bb
## recipes-bsp/edma3-lld/edma3-lld-rtos_git.bb
## recipes-bsp/emac-lld/emac-lld-rtos_git.bb
## recipes-bsp/fatfs-rtos/fatfs-rtos_git.bb
## recipes-bsp/gpio-lld/gpio-lld-rtos_git.bb
## recipes-bsp/i2c-lld/i2c-lld-rtos_git.bb
## recipes-bsp/mcasp-lld/mcasp-lld-rtos_git.bb
## recipes-bsp/mmcsd-lld/mmcsd-lld-rtos_git.bb
## recipes-bsp/pcie-lld/pcie-lld-rtos_git.bb
## recipes-bsp/pm-lld/pm-lld-rtos_git.bb
## recipes-bsp/spi-lld/spi-lld-rtos_git.bb
## recipes-bsp/transport-rtos/nimu-icss-rtos_git.bb
## recipes-bsp/transport-rtos/nimu-rtos_git.bb
## recipes-bsp/transport-rtos/timesync-rtos_git.bb
## recipes-bsp/uart-lld/uart-lld-rtos_git.bb
## recipes-bsp/usb-lld/usb-lld-rtos_git.bb
## recipes-bsp/utils-rtos/profiling-rtos_git.bb
## recipes-bsp/vps-lld/vps-lld-rtos_git.bb
## recipes-ti/openmp-rtos/openmp-rtos_git.bb
## recipes-ti/ti-pdk-build/ti-pdk-build-rtos_git.bb
## recipes-bsp/pru/pru-icss_git.bb

MACHINE_EXTRA_RDEPENDS += " \
    ti-gc320-libs \
    ti-gc320-driver \
    ti-sgx-ddk-km \
    ti-sgx-ddk-um \
    vpdma-fw \
    goodix-fw \
    ipumm-fw \
    kernel-modules \
    libulm \
    dsptop \
    uio-module-drv-test \
    spidev-test \
    i2c-tools \
    u-boot-ti-staging \
    prueth-fw prusw-fw pruhsr-fw pruprp-fw \
"


## KERNEL
PREFERRED_PROVIDER_virtual/kernel ?= "linux-ti-staging"
PREFERRED_VERSION_linux ?= "5.10%"
PREFERRED_VERSION_linux-ti-staging ?= "5.10%"


KERNEL_DEVICETREE = " \
    som-5728-5228.dtb \
"
KERNEL_MODULE_AUTOLOAD += " \
    galcore \
"

## UBOOT
PREFERRED_PROVIDER_virtual/bootloader = "u-boot-ti-staging"
PREFERRED_VERSION_u-boot-ti-staging = "2020.01%"
UBOOT_MACHINE = "som5728_defconfig"
UBOOT_SUFFIX = "img"

IMAGE_FSTYPES += " ext4 tar.gz "

SOM_NUMBER = "09"
UBOOT_REV = "01.000"
KERNEL_REV = "00.000"
FILESYSTEM_REV = "00.000"

SOC_FAMILY_append = "ti-soc:omap-a15:dra7xx:am57xx-evm"

# MACHINEOVERRIDES_append = ":ti-soc:omap-a15:dra7xx:am57xx-evm"
DEFAULTTUNE = "armv7athf-neon"
TI_PDK_LIMIT_SOCS = "am571x am572x am574x"

